import{a as g,i as D}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function r(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(c){if(c.ep)return;c.ep=!0;const a=r(c);fetch(c.href,a)}})();const H="https://dummyjson.com",_={PRODUCTS:"/products",PRODUCT_BY_ID:"/products/",SEARCH_PRODUCTS:"/products/search",CATEGORIES:"/products/category-list",PRODUCTS_BY_CATEGORY:"/products/category/"},$=12;g.defaults.baseURL=H;async function C(t){const e=(t-1)*$,{data:r}=await g.get(`${_.PRODUCTS}?limit=${$}&skip=${e}`);return r}async function F(){const{data:t}=await g.get(`${_.CATEGORIES}`);return t}async function P(t){const{data:e}=await g.get(`${_.PRODUCT_BY_ID}${t}`);return e}async function U(t){const{data:e}=await g.get(`${_.SEARCH_PRODUCTS}?q=${t}`);return e}async function W(t){const{data:e}=await g.get(`${_.PRODUCTS_BY_CATEGORY}${t}`);return e}function h(t){return Promise.all(t.map(e=>P(e)))}function y(t,e,r){t.forEach(n=>{n.classList.remove(r)}),e.classList.add(r)}function E(t,e){t.forEach(r=>{r.classList.remove(e)})}function f(t,e){return e.some(r=>r===t)}function T(t,e){return t.reduce((r,{price:n,id:c})=>e.some(a=>a===c)?r+Math.ceil(n):r,0)}const o={categoriesList:document.querySelector(".categories"),modalProduct:document.querySelector(".modal-product"),productsList:document.querySelector(".products"),modal:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalCartBtn:document.querySelector(".modal-product__btn--cart"),modalWishBtn:document.querySelector(".modal-product__btn--wishlist"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),searchFormBtnClear:document.querySelector(".search-form__btn-clear"),notFoundMes:document.querySelector(".not-found")};function x(t){const r=["All",...t].map(n=>`
      <li class="categories__item">
        <button class="categories__btn" type="button">${n}</button>
      </li>
    `).join("");o.categoriesList.innerHTML=r}function N({thumbnail:t,title:e,tags:r,description:n,shippingInformation:c,returnPolicy:a,price:m,id:w}){const k=r?`<ul class="modal-product__tags">${r.map(I=>`<li class="modal-product__tag">${I}</li>`).join("")}</ul>`:"",R=`<img class="modal-product__img" src="${t}" alt="${e}" />
            <div class="modal-product__content">
            <p class="modal-product__title">${e}</p>
            ${k}
            <p class="modal-product__description">${n}</p>
            <p class="modal-product__shipping-information">Shipping: ${c}</p>
            <p class="modal-product__return-policy">Return Policy: ${a}</p>
            <p class="modal-product__price">Price: ${m}$</p>
            <button class="modal-product__buy-btn" type="button">Buy</button>
            </div>`;o.modalProduct.innerHTML=R}function d(t){const e=t.map(({id:r,title:n,thumbnail:c,category:a,price:m,brand:w})=>`
    <li class="products__item" data-id="${r}">
        <img class="products__image" src="${c}" alt="${n}" />
        <p class="products__title">${n}</p>
        <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${w}</p>
        <p class="products__category">Category: ${a}</p>
        <p class="products__price">Price: $${m}</p>
    </li>
  `).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function u(t,e){const r=document.querySelector(`.nav__count[data-${t}-count]`),n=`${t}Count`;r.dataset[n]=e,r.textContent=e}function b(t,e,r){o.modalCartBtn.textContent=f(t,e)?"Remove from cart":"Add to Cart",o.modalWishBtn.textContent=f(t,r)?"Remove from Wishlist":"Add to Wishlist"}function S(t,e){const r=document.querySelector(".cart-summary__value[data-count]"),n=document.querySelector(".cart-summary__value[data-price]");r.textContent=t.length,r.dataset.count=t.length,n.textContent=`$${~~e}`,n.dataset.price=e}function j(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",B),o.modal.addEventListener("click",q),o.modalCloseBtn.addEventListener("click",L),o.modalCartBtn.addEventListener("click",M),o.modalWishBtn.addEventListener("click",O)}function L(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",B),o.modal.removeEventListener("click",q),o.modalCloseBtn.removeEventListener("click",L),o.modalCartBtn.removeEventListener("click",M),o.modalWishBtn.removeEventListener("click",O)}function B(t){t.key==="Escape"&&L()}function q(t){t.target===o.modal&&L()}function p(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch{return D.error({message:`Error during loading from LS for key "${t}": ${err}`}),null}}function A(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`SaveToLS error: ${r}`)}}let v=1,l,s,i;async function G(){s=p("cart")??[],i=p("wishlist")??[],u("cart",s.length),u("wishlist",i.length);try{const t=await F();x(t),y(document.querySelectorAll(".categories__btn"),document.querySelector(".categories__btn"),"categories__btn--active");const{products:e,total:r}=await C(v);if(!(e!=null&&e.length)){document.querySelector(".not-found").classList.add("not-found--visible"),E(document.querySelectorAll(".categories__btn"),"categories__btn--active");return}d(e)}catch(t){console.error(`Error init page, ${t}`)}}async function J(t){if(t.target.nodeName!=="BUTTON")return;o.productsList.innerHTML="";const e=t.target.textContent.toLowerCase(),r=document.querySelectorAll(".categories__btn");y(r,t.target,"categories__btn--active");try{const{products:n}=await(e==="all"?C(v):W(e));d(n)}catch(n){console.error("Something went wrong during choosing products category:",n)}o.searchForm.reset()}async function K(t){const e=t.target.closest(".products__item");if(e)try{const r=+e.dataset.id;l=r;const n=await P(r);N(n),j(),b(l,s,i)}catch(r){console.error("Error during loading product: ",r)}}async function z(t){t.preventDefault();const e=t.target.elements.searchValue.value.trim();if(!e){console.error("Please, fill the input"),t.target.reset();return}try{o.productsList.innerHTML="";const{products:r}=await U(e);if(!(r!=null&&r.length)){o.notFoundMes.classList.add("not-found--visible"),E(document.querySelectorAll(".categories__btn"),"categories__btn--active");return}d(r),y(document.querySelectorAll(".categories__btn"),document.querySelector(".categories__btn"),"categories__btn--active")}catch(r){console.error("Problems witch searching products:",r)}o.notFoundMes.classList.remove("not-found--visible")}async function V(t){o.searchForm.reset(),o.notFoundMes.classList.remove("not-found--visible"),y(document.querySelectorAll(".categories__btn"),document.querySelector(".categories__btn"),"categories__btn--active");try{o.productsList.innerHTML="";const{products:e}=await C(v);d(e)}catch(e){console.error("Problems during searching products:",e)}}async function M(){if(f(l,s)?s.splice(s.findIndex(t=>t===l),1):s.push(l),b(l,s,i),A("cart",s),u("cart",s.length),document.title==="Cart")try{const t=await h(s),e=T(t,s);o.productsList.innerHTML="",d(t),S(s,e)}catch(t){console.error(`Error with cart page, ${t}`)}}async function O(){if(f(l,i)?i.splice(i.findIndex(t=>t===l),1):i.push(l),b(l,s,i),A("wishlist",i),u("wishlist",i.length),document.title==="Wishlist")try{const t=await h(i);o.productsList.innerHTML="",d(t)}catch(t){console.error(`Error with wishlist page, ${t}`)}}async function Q(){s=p("cart")??[],i=p("wishlist")??[],u("cart",s.length),u("wishlist",i.length);try{const t=await h(i);o.productsList.innerHTML="",d(t)}catch(t){console.error(`Error init wishlist page, ${t}`)}}async function X(){s=p("cart")??[],i=p("wishlist")??[],u("cart",s.length),u("wishlist",i.length),S(s);try{const t=await h(s),e=T(t,s);o.productsList.innerHTML="",d(t),S(t,e)}catch(t){console.error(`Error init cart page, ${t}`)}}export{G as a,J as b,V as c,z as d,X as e,K as h,Q as i,o as r};
//# sourceMappingURL=handlers-DWaqqXCn.js.map
